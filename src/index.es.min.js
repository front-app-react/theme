import{convertRgb as e,lightenDarkenColor as t}from"./utilityColor.es.min.js";import{defaultFetch as r}from"./defaultFetch.es.min.js";export{checkSizing}from"./checkSizing.es.min.js";export{colorHandler}from"./colorHandler.es.min.js";export{getColorWithKeyCss}from"./getColorWithKeyCss.es.min.js";import o,{useState as n,useEffect as i,useCallback as c,useContext as l}from"react";import{ThemeProvider as a,ThemeContext as s}from"styled-components";import"@front-app-react/constants";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return e=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!==f(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===f(e)?e:String(e)}function u(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let y=((p={})[p.lightest=-2]="lightest",p[p.lighter=-1]="lighter",p[p.default=0]="default",p[p.darker=1]="darker",p[p.darkest=2]="darkest",p);var p;class m{constructor(){u(this,"_data",{})}clear(){this.t={}}getItem(e){return this.t[e]}setItem(e,t){this.t[e]=t}removeItem(e){delete this.t[e]}get length(){return Object.getOwnPropertyNames(this.t).length}key(e){return Object.getOwnPropertyNames(this.t)[e]}}function h(e,t){var r,o=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)),o}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const b={"theme.dir":"ltr","theme.locale":"en-US","theme.language":"english","theme.langLabel":"en"},O=(e,t,r)=>{const[o,i]=n({dictionary:b,loading:!0});return{dictionary:o.dictionary,onChange:async n=>{let c;if(i((e=>d(d({},e),{},{loading:!0}))),"string"==typeof n)try{c=await r(n),console.log("lang async 1")}catch(n){}else c=n,console.log("lang 1");return t.setItem(e+"-lang",c?.["theme.locale"]||o.dictionary["theme.locale"]),i((e=>d(d({},e),{},{dictionary:c,loading:!1}))),console.log("lang async 2"),c||o.dictionary},loading:o.loading}};function j(e,t){var r,o=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)),o}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const w=(r,o,l,a)=>{const[s,f]=n({color:{data:{},name:""},sizing:"function"!=typeof a?a:{btn:{},input:{}},loadingSizing:"function"==typeof a,loadingColor:!0,loading:!0});i((()=>{if("function"==typeof a)return f((e=>v(v({},e),{},{loadingSizing:!0}))),a().then((e=>{f((t=>v(v({},t),{},{loadingSizing:!1,sizing:e})))})).catch((e=>{f((e=>v(v({},e),{},{loadingSizing:!1})))})),()=>{}}),[]);var g=c(((r,o,n)=>{if("transparent"===r)return"transparent";console.log({state:s});var i=e(s.color&&r?s.color.data[r]:"#000000");switch(n=void 0!==n?n:1,o){case 1:return t(i,-15,n);case 2:return t(i,-30,n);case-1:return t(i,15,n);case-2:return t(i,30,n);default:return t(i,0,n)}}),[s]);return v(v({},s),{},{onChange:async e=>{let t;if(f((e=>v(v({},e),{},{loadingColor:!0}))),"string"==typeof e)try{t=await l(e),console.log("color async 1")}catch(e){}else t=e,console.log("color 1");return o.setItem(r+"-color",t.name||s.color),f((e=>v(v({},e),{},{color:t,loadingColor:!1}))),console.log("color async 2"),t||s.color},getColor:g,loading:s.loadingColor&&s.loadingSizing})};function P(e,t){if(null==e)return{};var r,o=function(e,t){if(null==e)return{};for(var r,o={},n=Object.keys(e),i=0;i<n.length;i++)r=n[i],0<=t.indexOf(r)||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),i=0;i<n.length;i++)r=n[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r]);return o}const S=["children","prefix","storage","defaultLang","defaultColor","defaultSizing"],C=e=>{let{children:t,prefix:n,storage:c=new m,defaultLang:l,defaultColor:s,defaultSizing:f}=e,g=P(e,S);const u=w(n,c,"function"!=typeof s||"string"==typeof s?e=>r(e,"color"):s,void 0===f?()=>r("sizing"):f),y=O(n,c,"function"!=typeof l||"string"==typeof l?e=>r(e,"lang"):l);return i((()=>((async()=>{var e=c.getItem(n+"-lang"),t=c.getItem(n+"-color");e?y.onChange(e):"object"==typeof l&&l.fetch&&"function"==typeof l.fetch?(e=await l.fetch(l.value),y.onChange(e)):y.onChange(l),t?u.onChange(t):"object"==typeof(e=s)&&e.fetch&&"function"==typeof e.fetch?(t=await e.fetch(e.value),u.onChange(t)):u.onChange(e)})(),()=>{})),[]),o.createElement(a,{theme:{style:u,lang:y,others:g}},t)},z=()=>l(s);export{y as IMoodColor,C as ThemeProvider,m as ThemeStorage,e as convertRgb,r as defaultFetch,t as lightenDarkenColor,O as useLang,w as useStyle,z as useTheme};
