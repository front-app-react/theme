import{convertRgb as e,lightenDarkenColor as t}from"./utilityColor.es.min.js";import{defaultFetch as r}from"./defaultFetch.es.min.js";export{checkSizing}from"./checkSizing.es.min.js";export{colorHandler}from"./colorHandler.es.min.js";export{getColorWithKeyCss}from"./getColorWithKeyCss.es.min.js";import n,{useState as o,useEffect as i,useCallback as c,useContext as a}from"react";import{ThemeProvider as l,ThemeContext as s}from"styled-components";import"@front-app-react/constants";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return e=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!==f(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===f(e)?e:String(e)}function g(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let p=((y={})[y.lightest=-2]="lightest",y[y.lighter=-1]="lighter",y[y.default=0]="default",y[y.darker=1]="darker",y[y.darkest=2]="darkest",y);var y;class b{constructor(){g(this,"_data",{})}clear(){this.t={}}getItem(e){return this.t[e]}setItem(e,t){this.t[e]=t}removeItem(e){delete this.t[e]}get length(){return Object.getOwnPropertyNames(this.t).length}key(e){return Object.getOwnPropertyNames(this.t)[e]}}function m(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)),n}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const h={"theme.dir":"ltr","theme.locale":"en-US","theme.language":"english","theme.langLabel":"en"},d=(e,t,r)=>{const[n,i]=o({dictionary:h,loading:!0});return{dictionary:n.dictionary,onChange:async o=>{let c;if(i((e=>O(O({},e),{},{loading:!0}))),"string"==typeof o)try{c=await r(o)}catch(o){}else c=o;return t.setItem(e+"-lang",c?.["theme.locale"]||n.dictionary["theme.locale"]),i((e=>O(O({},e),{},{dictionary:c,loading:!1}))),c||n.dictionary},loading:n.loading}};function j(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)),n}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const w=(r,n,a,l)=>{const[s,f]=o({color:{data:{},name:""},sizing:"function"!=typeof l?l:{btn:{},input:{}},loadingSizing:"function"==typeof l,loadingColor:!0,loading:!0});i((()=>{if("function"==typeof l)return f((e=>P(P({},e),{},{loadingSizing:!0}))),l().then((e=>{f((t=>P(P({},t),{},{loadingSizing:!1,sizing:e})))})).catch((e=>{f((e=>P(P({},e),{},{loadingSizing:!1})))})),()=>{}}),[]);var u=c(((r,n,o)=>{if("transparent"===r)return"transparent";var i=e(s.color&&r?s.color.data[r]:"#000000");switch(o=void 0!==o?o:1,n){case 1:return t(i,-15,o);case 2:return t(i,-30,o);case-1:return t(i,15,o);case-2:return t(i,30,o);default:return t(i,0,o)}}),[s]);return P(P({},s),{},{onChange:async e=>{let t;if(f((e=>P(P({},e),{},{loadingColor:!0}))),"string"==typeof e)try{t=await a(e)}catch(e){}else t=e;return n.setItem(r+"-color",t.name||s.color),f((e=>P(P({},e),{},{color:t,loadingColor:!1}))),t||s.color},getColor:u,loading:s.loadingColor&&s.loadingSizing})};function v(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};for(var r,n={},o=Object.keys(e),i=0;i<o.length;i++)r=o[i],0<=t.indexOf(r)||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)r=o[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}const S=["children","prefix","storage","defaultLang","defaultColor","defaultSizing"];function C(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)),n}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const D=e=>{let{children:t,prefix:o,storage:c=new b,defaultLang:a,defaultColor:s,defaultSizing:f}=e,u=v(e,S);const g=w(o,c,"function"!=typeof s||"string"==typeof s?e=>r(e,"color"):s,void 0===f?()=>r("sizing"):f),p=d(o,c,"function"!=typeof a||"string"==typeof a?e=>r(e,"lang"):a);return i((()=>((async()=>{var e=c.getItem(o+"-lang"),t=c.getItem(o+"-color");e?p.onChange(e):"object"==typeof a&&a.fetch&&"function"==typeof a.fetch?(e=await a.fetch(a.value),p.onChange(e)):p.onChange(a),t?g.onChange(t):"object"==typeof(e=s)&&e.fetch&&"function"==typeof e.fetch?(t=await e.fetch(e.value),g.onChange(t)):g.onChange(e)})(),()=>{})),[]),n.createElement(l,{theme:z({style:g,lang:p},u)},t)},k=()=>a(s);export{p as IMoodColor,D as ThemeProvider,b as ThemeStorage,e as convertRgb,r as defaultFetch,t as lightenDarkenColor,d as useLang,w as useStyle,k as useTheme};
